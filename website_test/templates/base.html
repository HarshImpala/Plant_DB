<!DOCTYPE html>
<html lang="en" data-theme="light" data-lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        // Apply theme immediately to prevent flash
        (function() {
            var theme = localStorage.getItem('theme') || 'light';
            var lang = localStorage.getItem('lang') || 'en';
            document.documentElement.setAttribute('data-theme', theme);
            document.documentElement.setAttribute('data-lang', lang);
            document.documentElement.lang = lang;
        })();
    </script>
    <title>{% block title %}Plant Encyclopedia{% endblock %}</title>
    <link rel="stylesheet" href="{{ base_url }}/static/css/style.css">
    {% block head %}{% endblock %}
</head>
<body>
    <header class="site-header">
        <div class="header-content">
            <a href="{{ base_url }}/index.html" class="site-logo">
                <h1>Plant Encyclopedia</h1>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="{{ base_url }}/index.html">Home</a></li>
                    <li><a href="{{ base_url }}/az-index.html">A-Z Index</a></li>
                    <li><a href="{{ base_url }}/families.html">Families</a></li>
                    <li><a href="{{ base_url }}/genera.html">Genera</a></li>
                </ul>
            </nav>
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search plants..." data-translate="search_placeholder" autocomplete="off">
                <div id="search-results" class="search-results"></div>
            </div>
            <div class="header-controls">
                <button id="lang-toggle" class="control-btn" title="Switch language">
                    <span class="lang-label">HU</span>
                </button>
                <button id="theme-toggle" class="control-btn" title="Toggle dark mode">
                    <span class="theme-icon light-icon">&#9788;</span>
                    <span class="theme-icon dark-icon">&#9790;</span>
                </button>
            </div>
        </div>
    </header>

    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <button id="back-to-top" class="back-to-top" aria-label="Back to top">&#8679;</button>

    <footer class="site-footer">
        <p>&copy; 2026 Plant Encyclopedia. Data sources: GBIF, World Flora Online, Wikipedia.</p>
        <p class="footer-links"><a href="{{ base_url }}/stats.html">Collection Statistics</a></p>
    </footer>

    <script src="{{ base_url }}/static/js/search.js?v={{ build_version }}"></script>
    <script src="{{ base_url }}/static/js/controls.js?v={{ build_version }}"></script>
    <script src="{{ base_url }}/static/js/lightbox.js?v={{ build_version }}"></script>
    {% block scripts %}{% endblock %}
</body>
</html>
