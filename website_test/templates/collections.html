{% extends "base.html" %}

{% block title %}Collections - Plant Encyclopedia{% endblock %}

{% block head %}
<style>
    .collections-page {
        max-width: 1100px;
        margin: 0 auto;
        padding: 2rem 1rem;
    }
    .collections-page > h1 {
        margin-bottom: 0.4rem;
    }
    .collections-page > .page-intro {
        color: var(--color-text-light);
        margin-bottom: 2rem;
    }
    .collections-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
    }
    .collection-card {
        display: flex;
        flex-direction: column;
        border: 1px solid var(--color-border-light);
        border-radius: 8px;
        overflow: hidden;
        text-decoration: none;
        color: inherit;
        background: var(--color-white);
        transition: box-shadow 0.15s, transform 0.15s;
    }
    .collection-card:hover {
        box-shadow: 0 4px 16px rgba(0,0,0,0.12);
        transform: translateY(-2px);
        text-decoration: none;
    }
    .collection-card-image {
        width: 100%;
        height: 160px;
        background: var(--color-header-bg);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        overflow: hidden;
    }
    .collection-card-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .collection-card-body {
        padding: 1rem 1.2rem 1.2rem;
        flex: 1;
        display: flex;
        flex-direction: column;
    }
    .collection-card-body h2 {
        font-size: 1.05rem;
        margin: 0 0 0.5rem;
        line-height: 1.3;
    }
    .collection-card-body p {
        font-size: 0.875rem;
        color: var(--color-text-light);
        margin: 0 0 0.8rem;
        flex: 1;
        line-height: 1.5;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .collection-card-count {
        font-size: 0.82rem;
        color: var(--color-accent);
        font-weight: 600;
    }
    .collections-empty {
        padding: 3rem;
        text-align: center;
        color: var(--color-text-light);
        border: 2px dashed var(--color-border-light);
        border-radius: 8px;
    }
</style>
{% endblock %}

{% block content %}
<div class="collections-page">
    <h1>
        <span class="lang-en" data-translate="collections_title">Collections</span>
        <span class="lang-hu">Gy≈±jtem√©nyek</span>
    </h1>
    <p class="page-intro">
        <span class="lang-en" data-translate="collections_intro">Browse plants organised by themed collections within the botanical garden.</span>
        <span class="lang-hu">B√∂ng√©sszen n√∂v√©nyek k√∂z√∂tt a botanikus kert tematikus gy≈±jtem√©nyei szerint.</span>
    </p>

    {% if collections %}
    <div class="collections-grid">
        {% for col in collections %}
        <a href="{{ base_url }}/collection/{{ col.slug }}.html" class="collection-card">
            <div class="collection-card-image">
                {% if col.image %}
                <img src="{{ base_url }}/static/images/collections/{{ col.image }}" alt="{{ col.name_en }}">
                {% else %}
                üåø
                {% endif %}
            </div>
            <div class="collection-card-body">
                <h2>
                    <span class="lang-en">{{ col.name_en }}</span>
                    <span class="lang-hu">{{ col.name_hu }}</span>
                </h2>
                <p>
                    <span class="lang-en">{{ col.description_en[:180] }}{% if col.description_en|length > 180 %}‚Ä¶{% endif %}</span>
                    <span class="lang-hu">{{ col.description_hu[:180] }}{% if col.description_hu|length > 180 %}‚Ä¶{% endif %}</span>
                </p>
                <span class="collection-card-count">
                    <span class="lang-en">{{ col.plant_count }} plant{% if col.plant_count != 1 %}s{% endif %}</span>
                    <span class="lang-hu">{{ col.plant_count }} n√∂v√©ny</span>
                </span>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="collections-empty">
        <p>No collections defined yet. Edit <code>data/collections.json</code> to add collections.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
